# Уточняющие вопросы для игры "Сапёр"

## 1. Системные характеристики

### Вопрос 1.1: Платформа и специфика браузеров/ОС
**Вопрос:** На какой платформе должно работать приложение (веб-браузер, desktop и т.д.)? Какие браузеры и операционные системы поддерживать?

**Предположительный ответ:**
- **Платформа:** веб-браузер
- **Браузеры по движкам:**
  - **Chromium-based:** Google Chrome 90+, Brave, Edge 90+, Opera 76+
  - **Gecko:** Mozilla Firefox 88+
  - **WebKit:** Apple Safari 14+
- **Операционные системы:**
  - **Десктоп:** Windows 10+, macOS 10.15+, Linux (основные дистрибутивы), FreeBSD
  - **Мобильные:** iOS 12+, Android 8+

### Вопрос 1.2: Требования к производительности
**Вопрос:** Какие требования к размеру приложения, времени инициализации и отзывчивости интерфейса?

**Предположительный ответ:**
- **Размер приложения:** не более 14 килобайт (Initial Congestion Window — уложиться в один RTT)
- **Время инициализации:** менее 100 мс после полной загрузки и перед готовностью приложения к использованию
- **Отзывчивость клика/касания:** реакция интерфейса в течение 100 мс
- Примечание: время загрузки зависит от скорости интернета пользователя и выходит за рамки требований к самому приложению

### Вопрос 1.3: Требования к безопасности и идентификации
**Вопрос:** Какие требования к безопасности, защите данных и управлению пользователями?

**Предположительный ответ:**
- **Платформа работы:** локальная (на устройстве пользователя), без передачи данных на удалённый сервер
- **Хранилище статистики:** localStorage браузера (незашифрованный вид)
- **Аутентификация/авторизация:** не требуется
- **Идентификация:** опциональная поддержка имени пользователя для привязки статистики к пользователю (локально)
- **Защита от читерства:** не требуется на текущем этапе
- **Дополнительные защиты:** не требуются (приложение работает локально на устройстве пользователя)

## 2. Пользовательские требования

### Вопрос 2.1: Структура интерфейса
**Вопрос:** Какие элементы интерфейса должны быть в приложении? Как они должны быть организованы?

**Предположительный ответ:**
- **Таймер:** показывает время, прошедшее с начала текущей игры (начинается с первого клика)
- **Элемент меню (панель управления):**
  - Кнопка "Пауза" (приостанавливает игру и таймер)
  - Кнопка "Новая игра" (открывает экран выбора уровня сложности)
  - Кнопка "Статистика" (отображает общую статистику: количество побед и поражений)
  - Кнопка "Сохранить прогресс" (открывает попап для ввода названия текущего "забега", сохраняет параметры игры)
  - Кнопка справки (знак "?") рядом с меню — открывает справку с правилами игры и инструкциями по управлению
- **Поле для игры:** основной игровой элемент в центре/слева
- **Панель статистики справа от основного окна:** показывает:
  - Текущий счёт ходов (количество сделанных ходов)
  - Количество установленных флажков
  - Количество открытых клеток
  - Счётчик оставшихся мин

**Режимы отображения по размеру экрана:**
- **Мобильные экраны и планшетные:** вертикальное расположение элементов, игровое поле занимает весь доступный размер, содержимое можно прокручивать вертикально (вертикальная полоса прокрутки включена)
- **Настольные ПК:** горизонтальное расположение с игровым полем и панелями, масштабирование контента пропорционально размеру окна (без полос прокрутки, весь контент должен помещаться на экран)
- **Телевизоры и очень большие экраны (высокие диагонали >= 27"):** фиксация контента с максимальным размером, центрирование на экране, панели остаются пропорциональными размеру окна (без полос прокрутки)

**Правила горизонтального скролла:**
- Горизонтальных полос прокрутки нет ни в одном режиме отображения
- Весь контент всегда умещается в ширину экрана

### Вопрос 2.2: Управление на мобильных устройствах
**Вопрос:** Как должно работать управление на мобильных устройствах? Как различать левый и правый клик?

**Предположительный ответ:**
- **Левый клик (открыть клетку):** одиночное касание (tap)
- **Правый клик (поставить флаг):** долгое нажатие (long press, минимум 400 мс)
- Поддержка жестов: масштабирование для больших полей на мобильных устройствах

### Вопрос 2.3: Локализация и интернационализация
**Вопрос:** На каких языках должен быть доступен интерфейс?

**Предположительный ответ:**
- **Языки интерфейса:** английский (основной) и русский (автоматический выбор по системным настройкам) (с возможностью выбора)
- **Динамический перевод:** все элементы интерфейса переводятся в реальном времени при изменении языка
- **Формат чисел:** локализированное форматирование чисел и дат (в соответствии с региональными настройками системы)
- **Хранение выбора:** последний выбранный язык сохраняется локально в localStorage и применяется при следующем запуске приложения

### Вопрос 2.4: Визуальное отображение и цветовые схемы
**Вопрос:** Как приложение должно поддерживать различные цветовые схемы?

**Предположительный ответ:**
- **Поддержка цветовых схем:**
  - Светлая тема (light mode)
  - Тёмная тема (dark mode)
- **Определение темы:**
  - Автоматический выбор на основе системных настроек (prefers-color-scheme)
  - Возможность ручного выбора в интерфейсе приложения
  - Сохранение выбора пользователя в localStorage
- **Цветовой контраст:** обе темы должны соответствовать WCAG AA (коэффициент контраста минимум 4.5:1 для текста)

### Вопрос 2.5: Сохранение состояния игры
**Вопрос:** Как приложение должно обрабатывать случайное обновление страницы или закрытие браузера?

**Предположительный ответ:**
- **Техническая реализация:** состояние текущей игры записывается в localStorage (см. вопрос 3.5 для деталей бизнес-правил)
- **Восстановление при загрузке:**
  - Если есть незавершённая игра (просто закрыли браузер), предлагается продолжить её
  - Кнопка "Продолжить игру" восстанавливает последнюю незавершённую игру
  - Кнопка "Новая игра" запускает выбор уровня сложности
- **Ранее сохранённые игры:**
  - Кнопка "Загрузить сохранение" в меню открывает список сохранённых игр (созданных через "Сохранить прогресс")
  - Пользователь может выбрать и продолжить любую из них
- **Очистка:** при завершении игры (победа/поражение) текущее состояние удаляется, но статистика сохраняется

### Вопрос 2.6: Анимация и визуальные эффекты
**Вопрос:** Как приложение должно использовать анимации и визуальные эффекты?

**Предположительный ответ:**
- **Плавные анимации:** все переходы и изменения интерфейса должны быть плавными и анимированными (без рывков и фризов)
- **Анимации элементов:**
  - Открытие/закрытие клеток: плавное раскрытие с переходом
  - Установка/снятие флагов: плавное появление/исчезновение
  - Переходы между экранами: фейды или слайды
  - Успешное завершение игры: конфетти или другой эффект (опционально)
- **Производительность:** анимации не должны вызывать фризы, использовать GPU-ускорение через CSS transforms и opacity
- **Скорость анимаций:** 100-200 мс для стандартных переходов (быстро и отзывчиво)

## 3. Бизнес-правила

### Вопрос 3.1: Генерация расположения мин
**Вопрос:** Как генерируется расположение мин: полностью случайно или по алгоритму, гарантирующему открытие первой клетки без мины?

**Предположительный ответ:**
- Расположение мин генерируется случайно, но **гарантируется:** первая открытая клетка никогда не содержит мину
- Первые N клеток вокруг первого клика должны быть свободны от мин (очищение зоны)
- Мины распределяются равномерно по полю
- **Использование сида:** генератор случайных чисел использует сид (seed), что позволяет воспроизвести одну и ту же конфигурацию поля при загрузке сохранённой игры

### Вопрос 3.2: Поведение при открытии пустой клетки
**Вопрос:** Что происходит при открытии клетки с нулевым количеством прилегающих мин? Должны ли открываться все соседние клетки автоматически?

**Предположительный ответ:**
- Да, при открытии клетки с 0 прилегающих мин автоматически открываются все соседние клетки (рекурсивно)
- Этот процесс продолжается до границы или до клеток с числом мин > 0
- Флаги на соседних клетках не блокируют это автооткрытие

### Вопрос 3.3: Механика флагов
**Вопрос:** Может ли пользователь поставить флаг на уже открытую клетку? Что произойдёт при открытии клетки с флагом?

**Предположительный ответ:**
- Флаги можно ставить только на **закрытые** клетки
- При клике (левый / правый) на клетку с флагом: флаг снимается (не открывается клетка)

### Вопрос 3.4: Условия победы и поражения
**Вопрос:** Какие точные условия определяют победу? Достаточно ли просто открыть все безопасные клетки, или нужно корректно отметить все мины флагами?

**Предположительный ответ:**
- **Победа:** открыты все клетки, не содержащие мин (флаги необязательны для победы)
- **Поражение:** открыта клетка с миной
- При открытии мины игра **немедленно завершается**, остаток поля не откроется

### Вопрос 3.5: Сохранение и восстановление состояния игры
**Вопрос:** Как должно реализоваться автоматическое сохранение состояния игры?

**Предположительный ответ:**
- **Автоматическое сохранение:** состояние текущей игры записывается в localStorage браузера после каждого хода (ответ на техническую реализацию см. в вопросе 2.5)
- **Сохраняемые данные:**
  - Конфигурация поля (размер, расположение мин, сид генератора)
  - Статус каждой клетки (открыта/закрыта, флаг/без флага)
  - Текущее время игры (таймер)
  - Номер текущего хода
- **Целость данных:** при загрузке сохранённой игры, сид генератора гарантирует воспроизведение того же расположения мин
- **Очистка:** при завершении игры (победа/поражение) текущее состояние удаляется из localStorage, но статистика остаётся

### Вопрос 3.6: Параметры уровней сложности
**Вопрос:** Какие точные параметры (размер поля, количество мин) для каждого уровня сложности?

**Предположительный ответ:**
- **Новичок:** 8×8 клеток, 10 мин, плотность: 15.6%
- **Любитель:** 16×16 клеток, 40 мин, плотность: 15.6%
- **Профессионал:** 16×30 клеток, 99 мин, плотность: 20.6%
- Эти значения соответствуют классическим уровням

### Вопрос 3.7: Пользовательский уровень сложности
**Вопрос:** Должна ли быть возможность создать собственный уровень с произвольными параметрами?

**Предположительный ответ:**
- На начальном этапе: нет
- Три фиксированных уровня сложности достаточно

## 4. Ограничения

### Вопрос 4.1: Ограничения по памяти и подключению
**Вопрос:** Есть ли ограничения по использованию памяти или требования к подключению к интернету?

**Предположительный ответ:**
- **Памяти браузера:** приложение должно работать в браузерах с ограничениями localStorage
- **Подключение:** требуется доступ в интернет для первой загрузки, затем приложение может работать как PWA с кешированием

### Вопрос 4.2: Отсутствие серверной части
**Вопрос:** Может ли приложение полагаться на серверную часть?

**Предположительный ответ:**
- Приложение работает исключительно на клиенте (браузер пользователя)
- Нет требований к серверному бэкенду
- Все данные хранятся локально в localStorage

## 5. Технологический стек и инфраструктура

### Вопрос 5.1: Язык программирования и технологический стек
**Вопрос:** Какой язык программирования и технологический стек использовать для разработки?

**Предположительный ответ:**
- **Язык разработки:** TypeScript (с компиляцией в JavaScript)
- **Фреймворк:** Vanilla JavaScript (без использования React, Vue, Angular и других тяжелых библиотек)
- **Причина:** строгое ограничение на размер бандла (максимум 14 килобайт) исключает использование фреймворков
- **Внешние зависимости:** отсутствуют (ноль внешних библиотек, все должно быть написано с нуля)
- **Сборщик:** minified/bundler (esbuild, swc или аналог для минификации и оптимизации)
- **Стилизация:** встроенный CSS или CSS-in-JS без зависимостей
- **Бандл:** финальный размер production-бандла (минифицированный и сжатый) не должен превышать 14 килобайт
- **Оптимизация:** использование современных возможностей JavaScript для минимизации размера кода

### Вопрос 5.2: Требования к сборке и развёртыванию
**Вопрос:** Требуется ли CI/CD, документация по развёртыванию, поддержка различных окружений?

**Предположительный ответ:**
- **Формат бандла:** приложение компилируется как самодостаточный бандл (HTML + CSS + JS в одном файле или папке)
- **Тип контента:** статический контент с CSS-анимациями (без необходимости в динамических запросах на сервер)
- **Инфраструктура развёртывания:** простой веб-сервер для отдачи статики (например, nginx)
- **CI/CD:** обязателен полный цикл с автоматизацией (GitLab CI)
  - Этапы: сборка → линтинг → тестирование → минификация → развёртывание
  - Автоматическое развёртывание при push в production ветку
- **Документация:** README с инструкциями по установке, запуску, сборке и развёртыванию

## 6. Требования к сохранению данных и статистике

### Вопрос 6.1: Место хранения статистики
**Вопрос:** Где должна храниться статистика: локально в браузере (localStorage) или на удалённом сервере?

**Предположительный ответ:**
- Хранение **локально** в браузере (localStorage)
- Статистика привязана к устройству и браузеру, не требует сервера

### Вопрос 6.2: Метрики статистики
**Вопрос:** Какие именно метрики должны собираться? Только общее количество, победы и поражения, или более детальные данные?

**Предположительный ответ:**
- **Обязательные метрики:**
  - Общее количество сыгранных игр
  - Количество побед
  - Количество поражений
  - Процент побед
  - Лучшее время прохождения для каждого уровня сложности
  - Количество игр по уровню сложности
  - Дата последней игры

### Вопрос 6.3: Сброс статистики
**Вопрос:** Должна ли быть возможность очистить/сбросить статистику? Есть ли пароль или подтверждение?

**Предположительный ответ:**
- Должна быть кнопка "Очистить статистику" с диалогом подтверждения
- Пароль не требуется
- После очистки все счётчики сбрасываются на 0
